import{_ as y,r as h,a as N,o as m,c as f,d as e,w as t,u as n,I as E,e as g,b as a,f as v,g as _,h as D,p as C,q as V,t as x,s as M,m as $,F as j,i as L,j as T,x as O,y as P,z as G,A as J,B as U,C as z,D as F,E as S,l as w,G as H,H as R}from"./index-d7305e10.js";const q=c=>(C("data-v-247b14f6"),c=c(),V(),c),K={class:"questionContainer"},Q=["src"],W=q(()=>a("br",null,null,-1)),X=q(()=>a("h1",null,"Send with notification",-1)),Y={id:"markdowneditor"},Z={__name:"AnnouncementCreator",setup(c){const l=h(""),i=h("");function r(){const u=document.querySelectorAll("#title")[0].value,o=document.querySelectorAll("#desc")[0].value,s=document.querySelectorAll("#imglink")[0].value;console.log("Creating "+u+" with description "+o),fetch("https://greencanyonapp.com/api/announcements",{method:"POST",body:JSON.stringify({timestamp:new Date().getTime()/1e3,title:u,descr:o,imglink:s,article:l.value,key:localStorage.getItem("key")}),headers:{"Content-Type":"application/json"}}).then(d=>{if(!d.ok){alert("There was an error creating poll. Are you sure you have a key saved?");return}location.reload(),alert("Poll created!")}).catch(d=>{alert("An unknown error occurred.")});const b=document.querySelectorAll("#allnotif")[0].checked,k=document.querySelectorAll("#gamesnotif")[0].checked,A=document.querySelectorAll("#eventsnotif")[0].checked,I=document.querySelectorAll("#schedulenotif")[0].checked;if(b||k||A||I){let d="";b&&(d="all"),k&&(d="game"),A&&(d="event"),I&&(d="schedule"),console.log("Sending notification to "+d),fetch("https://greencanyonapp.com/api/notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:d,title:"New announcement!",body:u,key:localStorage.getItem("key")})})}}return(u,o)=>{const s=N("v-md-editor");return m(),f("div",K,[e(n(D),null,{default:t(()=>[e(n(E),null,{default:t(()=>[e(n(g),{placeholder:"Announcement Title",label:"",id:"title"}),e(n(g),{placeholder:"Announcement Description",label:"",id:"desc"}),e(n(g),{placeholder:"Image Link",label:"",id:"imglink",modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=p=>i.value=p)},null,8,["modelValue"]),a("img",{src:i.value,alt:"",style:{border:"1px solid white","max-height":"165px"}},null,8,Q),W,X,e(n(v),{"label-placement":"fixed",class:"check",id:"allnotif"},{default:t(()=>[_("All")]),_:1}),e(n(v),{"label-placement":"fixed",class:"check",id:"eventsnotif"},{default:t(()=>[_("Events")]),_:1}),e(n(v),{"label-placement":"fixed",class:"check",id:"gamesnotif"},{default:t(()=>[_("Games")]),_:1}),e(n(v),{"label-placement":"fixed",class:"check",id:"schedulenotif"},{default:t(()=>[_("Schedule")]),_:1})]),_:1})]),_:1}),a("div",Y,[e(s,{modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=p=>l.value=p),height:"400px"},null,8,["modelValue"])]),a("button",{style:{width:"50%","font-size":"30px","margin-bottom":"15px"},onClick:r}," Create Announcement ")])}}},ee=y(Z,[["__scopeId","data-v-247b14f6"]]);const ne={class:"full"},te={style:{color:"gray"}},oe={class:"buttons full"},ae=["src"],le={__name:"AnnouncementView",props:["announcement"],emits:["responses"],setup(c,{emit:l}){const i=c;function r(o,s){confirm("Are you sure you want to delete announcement "+o+"?")&&u(s)}function u(o){fetch("https://greencanyonapp.com/api/announcements",{method:"DELETE",body:JSON.stringify({key:localStorage.getItem("key"),id:o}),headers:{"Content-Type":"application/json"}}).then(()=>{location.reload()})}return(o,s)=>(m(),f("div",ne,[a("div",null,[a("h2",null,x(i.announcement.title),1),a("h6",te,x(i.announcement.descr),1),a("div",oe,[e(n($),null,{default:t(()=>[e(n(M),{color:"danger",onClick:s[0]||(s[0]=p=>r(i.announcement.title,i.announcement.id))},{default:t(()=>[_("Delete")]),_:1})]),_:1})])]),a("div",null,[a("img",{src:i.announcement.imglink,alt:"",style:{"max-width":"150px","border-radius":"2px"}},null,8,ae)])]))}},se=y(le,[["__scopeId","data-v-47660b60"]]);const ce={class:"div"},ie={__name:"AnnouncementViewer",setup(c){const l=h([]),i=h(-1),r=async()=>{const u="https://greencanyonapp.com/api/announcements?max=100&offset=0&sortbytime=1";try{const o=(await(await fetch(u,{method:"GET"})).json()).data;return console.log(o),o}catch(o){console.error(o)}return[]};return(async()=>(l.value=await r(),console.log(l.value)))(),(u,o)=>(m(),f("div",ce,[e(n(O),{lines:"inset",class:"left"},{default:t(()=>[(m(!0),f(j,null,L(l.value,s=>(m(),T(n($),{key:s},{default:t(()=>[e(se,{onResponses:p=>i.value=s.id,announcement:s},null,8,["onResponses","announcement"])]),_:2},1024))),128))]),_:1})]))}},ue=y(ie,[["__scopeId","data-v-9b98820d"]]);const B=c=>(C("data-v-73c6766e"),c=c(),V(),c),de=B(()=>a("div",null,[a("h1",null,"Announcement Manager")],-1)),re=B(()=>a("div",{class:"division"},null,-1)),_e={key:0},me={key:1},pe={__name:"AnnouncementManager",setup(c){const l=h("tab2");return(i,r)=>(m(),T(n(R),null,{default:t(()=>[e(n(z),{translucent:!0},{default:t(()=>[e(n(P),null,{default:t(()=>[e(n(G),{slot:"start"},{default:t(()=>[e(n(J),{color:"primary"})]),_:1}),e(n(U),null,{default:t(()=>[_("Announcement Manager")]),_:1})]),_:1})]),_:1}),e(n(H),null,{default:t(()=>[de,re,e(n(F),{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=u=>l.value=u),value:"tab2"},{default:t(()=>[e(n(S),{value:"tab2"},{default:t(()=>[_(" View Announcements ")]),_:1}),e(n(S),{value:"tab1"},{default:t(()=>[_(" Create Announcement ")]),_:1})]),_:1},8,["modelValue"]),l.value==="tab1"?(m(),f("div",_e,[e(ee)])):w("",!0),l.value==="tab2"?(m(),f("div",me,[e(ue)])):w("",!0)]),_:1})]),_:1}))}},he=y(pe,[["__scopeId","data-v-73c6766e"]]);export{he as default};
