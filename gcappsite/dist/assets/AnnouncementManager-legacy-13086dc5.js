System.register(["./index-legacy-c216acec.js","./AnnouncementViewer.vue_vue_type_style_index_0_scoped_9b98820d_lang-legacy-ee67049d.js"],(function(e,t){"use strict";var n,l,a,o,c,u,i,d,s,r,m,p,f,y,v,h,g,_,k,b,S,w,A,x,V,T,C,I,O,N,q,D,J,j,E;return{setters:[e=>{n=e._,l=e.r,a=e.a,o=e.o,c=e.c,u=e.d,i=e.w,d=e.u,s=e.I,r=e.e,m=e.b,p=e.f,f=e.g,y=e.h,v=e.v,h=e.i,g=e.t,_=e.j,k=e.q,b=e.s,S=e.x,w=e.n,A=e.F,x=e.k,V=e.l,T=e.y,C=e.z,I=e.A,O=e.B,N=e.C,q=e.D,D=e.E,J=e.G,j=e.H,E=e.J},null],execute:function(){var t=document.createElement("style");t.textContent=".division[data-v-73c6766e]{position:relative;width:80%;height:3px;background-color:#fff;left:50%;transform:translate(-50%)}h1[data-v-73c6766e],h2[data-v-73c6766e]{text-align:center}\n",document.head.appendChild(t);const P=e=>(k("data-v-4aee5996"),e=e(),b(),e),U={class:"questionContainer"},G=["src"],M=P((()=>m("br",null,null,-1))),z=P((()=>m("h1",null,"Notify",-1))),L={id:"markdowneditor"},R=n({__name:"AnnouncementCreator",setup(e){const t=l(""),n=l(""),k=l(!1),b=l(0);function S(){const e=document.querySelectorAll("#title")[0].value,n=document.querySelectorAll("#desc")[0].value,l=document.querySelectorAll("#imglink")[0].value;console.log("Creating "+e+" with description "+n),k.value?fetch("/scheduleaction",{method:"POST",body:JSON.stringify({endpoint:"announcements",body:JSON.stringify({timestamp:(new Date).getTime()/1e3,title:e,descr:n,imglink:l,article:t.value,key:localStorage.getItem("key")}),time:new Date(b.value).getTime()})}):fetch("https://greencanyonapp.com/api/announcements",{method:"POST",body:JSON.stringify({timestamp:(new Date).getTime()/1e3,title:e,descr:n,imglink:l,article:t.value,key:localStorage.getItem("key")}),headers:{"Content-Type":"application/json"}}).then((e=>{e.ok?(location.reload(),alert("Poll created!")):alert("There was an error creating poll. Are you sure you have a key saved?")})).catch((e=>{alert("An unknown error occurred.")}));const a=document.querySelectorAll("#allnotif")[0].checked,o=document.querySelectorAll("#gamesnotif")[0].checked,c=document.querySelectorAll("#eventsnotif")[0].checked,u=document.querySelectorAll("#schedulenotif")[0].checked;if(a||o||c||u){let t="";a&&(t="all"),o&&(t="game"),c&&(t="event"),u&&(t="schedule"),console.log("Sending notification to "+t),k.value?fetch("/scheduleaction",{method:"POST",body:JSON.stringify({endpoint:"notification",body:JSON.stringify({topic:t,title:"New announcement!",body:e,key:localStorage.getItem("key")}),time:new Date(b.value).getTime()})}):fetch("https://greencanyonapp.com/api/notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:t,title:"New announcement!",body:e,key:localStorage.getItem("key")})})}}return(e,l)=>{const w=a("v-md-editor");return o(),c("div",U,[u(d(_),null,{default:i((()=>[u(d(s),null,{default:i((()=>[u(d(r),{placeholder:"Announcement Title",label:"",id:"title"}),u(d(r),{placeholder:"Announcement Description",label:"",id:"desc"}),u(d(r),{placeholder:"Image Link",label:"",id:"imglink",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e)},null,8,["modelValue"]),m("img",{src:n.value,alt:"",style:{border:"1px solid white","max-height":"165px"}},null,8,G),u(d(p),{"label-placement":"fixed",class:"check",id:"schedule",modelValue:k.value,"onUpdate:modelValue":l[1]||(l[1]=e=>k.value=e)},{default:i((()=>[f("Schedule")])),_:1},8,["modelValue"]),k.value?y((o(),c("input",{key:0,type:"datetime-local",step:"1","onUpdate:modelValue":l[2]||(l[2]=e=>b.value=e)},null,512)),[[v,b.value]]):h("",!0),m("p",null,g(new Date(b.value).getTime()),1),M,z,u(d(p),{"label-placement":"fixed",class:"check",id:"allnotif"},{default:i((()=>[f("All")])),_:1}),u(d(p),{"label-placement":"fixed",class:"check",id:"eventsnotif"},{default:i((()=>[f("Events")])),_:1}),u(d(p),{"label-placement":"fixed",class:"check",id:"gamesnotif"},{default:i((()=>[f("Games")])),_:1}),u(d(p),{"label-placement":"fixed",class:"check",id:"schedulenotif"},{default:i((()=>[f("Schedule")])),_:1})])),_:1})])),_:1}),m("div",L,[u(w,{modelValue:t.value,"onUpdate:modelValue":l[3]||(l[3]=e=>t.value=e),height:"400px"},null,8,["modelValue"])]),m("button",{style:{width:"50%","font-size":"30px","margin-bottom":"15px"},onClick:S}," Create Announcement ")])}}},[["__scopeId","data-v-4aee5996"]]),B={class:"full"},F={style:{color:"gray"}},H={class:"buttons full"},K=["src"],Q=n({__name:"AnnouncementView",props:["announcement"],emits:["responses"],setup(e,{emit:t}){const n=e;function l(e,t){confirm("Are you sure you want to delete announcement "+e+"?")&&function(e){fetch("https://greencanyonapp.com/api/announcements",{method:"DELETE",body:JSON.stringify({key:localStorage.getItem("key"),id:e}),headers:{"Content-Type":"application/json"}}).then((()=>{location.reload()}))}(t)}return(e,t)=>(o(),c("div",B,[m("div",null,[m("h2",null,g(n.announcement.title),1),m("h6",F,g(n.announcement.descr),1),m("div",H,[u(d(w),null,{default:i((()=>[u(d(S),{color:"danger",onClick:t[0]||(t[0]=e=>l(n.announcement.title,n.announcement.id))},{default:i((()=>[f("Delete")])),_:1})])),_:1})])]),m("div",null,[m("img",{src:n.announcement.imglink,alt:"",style:{"max-width":"150px","border-radius":"2px"}},null,8,K)])]))}},[["__scopeId","data-v-47660b60"]]),W={class:"div"},X=n({__name:"AnnouncementViewer",setup(e){const t=l([]),n=l(-1);return(async()=>{t.value=await(async()=>{try{const e=(await(await fetch("https://greencanyonapp.com/api/announcements?max=100&offset=0&sortbytime=1",{method:"GET"})).json()).data;return console.log(e),e}catch(e){console.error(e)}return[]})(),console.log(t.value)})(),(e,l)=>(o(),c("div",W,[u(d(T),{lines:"inset",class:"left"},{default:i((()=>[(o(!0),c(A,null,x(t.value,(e=>(o(),V(d(w),{key:e},{default:i((()=>[u(Q,{onResponses:t=>n.value=e.id,announcement:e},null,8,["onResponses","announcement"])])),_:2},1024)))),128))])),_:1})]))}},[["__scopeId","data-v-9b98820d"]]),Y=e=>(k("data-v-73c6766e"),e=e(),b(),e),Z=Y((()=>m("div",null,[m("h1",null,"Announcement Manager")],-1))),$=Y((()=>m("div",{class:"division"},null,-1))),ee={key:0},te={key:1};e("default",n({__name:"AnnouncementManager",setup(e){const t=l("tab2");return(e,n)=>(o(),V(d(E),null,{default:i((()=>[u(d(q),{translucent:!0},{default:i((()=>[u(d(C),null,{default:i((()=>[u(d(I),{slot:"start"},{default:i((()=>[u(d(O),{color:"primary"})])),_:1}),u(d(N),null,{default:i((()=>[f("Announcement Manager")])),_:1})])),_:1})])),_:1}),u(d(j),null,{default:i((()=>[Z,$,u(d(D),{modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=e=>t.value=e),value:"tab2"},{default:i((()=>[u(d(J),{value:"tab2"},{default:i((()=>[f(" View Announcements ")])),_:1}),u(d(J),{value:"tab1"},{default:i((()=>[f(" Create Announcement ")])),_:1})])),_:1},8,["modelValue"]),"tab1"===t.value?(o(),c("div",ee,[u(R)])):h("",!0),"tab2"===t.value?(o(),c("div",te,[u(X)])):h("",!0)])),_:1})])),_:1}))}},[["__scopeId","data-v-73c6766e"]]))}}}));
