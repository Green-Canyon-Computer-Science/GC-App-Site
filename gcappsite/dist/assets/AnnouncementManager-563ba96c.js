import{_ as k,r as h,a as B,o as _,c as v,d as e,w as n,u as t,I as J,e as b,b as a,f as g,g as p,h as E,v as M,i as S,t as I,j as P,q as C,s as $,x as j,n as N,F as L,k as U,l as D,y as G,z,A as F,B as H,C as R,D as K,E as Q,G as V,H as W,J as X}from"./index-b713903c.js";/* empty css                                                                           */const O=c=>(C("data-v-4aee5996"),c=c(),$(),c),Y={class:"questionContainer"},Z=["src"],ee=O(()=>a("br",null,null,-1)),te=O(()=>a("h1",null,"Notify",-1)),ne={id:"markdowneditor"},oe={__name:"AnnouncementCreator",setup(c){const l=h(""),i=h(""),u=h(!1),d=h(0);function r(){const o=document.querySelectorAll("#title")[0].value,s=document.querySelectorAll("#desc")[0].value,y=document.querySelectorAll("#imglink")[0].value;console.log("Creating "+o+" with description "+s),u.value?fetch("/scheduleaction",{method:"POST",body:JSON.stringify({endpoint:"announcements",body:JSON.stringify({timestamp:new Date().getTime()/1e3,title:o,descr:s,imglink:y,article:l.value,key:localStorage.getItem("key")}),time:new Date(d.value).getTime()})}):fetch("https://greencanyonapp.com/api/announcements",{method:"POST",body:JSON.stringify({timestamp:new Date().getTime()/1e3,title:o,descr:s,imglink:y,article:l.value,key:localStorage.getItem("key")}),headers:{"Content-Type":"application/json"}}).then(T=>{if(!T.ok){alert("There was an error creating poll. Are you sure you have a key saved?");return}location.reload(),alert("Poll created!")}).catch(T=>{alert("An unknown error occurred.")});const m=document.querySelectorAll("#allnotif")[0].checked,A=document.querySelectorAll("#gamesnotif")[0].checked,w=document.querySelectorAll("#eventsnotif")[0].checked,x=document.querySelectorAll("#schedulenotif")[0].checked;if(m||A||w||x){let f="";m&&(f="all"),A&&(f="game"),w&&(f="event"),x&&(f="schedule"),console.log("Sending notification to "+f),u.value?fetch("/scheduleaction",{method:"POST",body:JSON.stringify({endpoint:"notification",body:JSON.stringify({topic:f,title:"New announcement!",body:o,key:localStorage.getItem("key")}),time:new Date(d.value).getTime()})}):fetch("https://greencanyonapp.com/api/notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:f,title:"New announcement!",body:o,key:localStorage.getItem("key")})})}}return(o,s)=>{const y=B("v-md-editor");return _(),v("div",Y,[e(t(P),null,{default:n(()=>[e(t(J),null,{default:n(()=>[e(t(b),{placeholder:"Announcement Title",label:"",id:"title"}),e(t(b),{placeholder:"Announcement Description",label:"",id:"desc"}),e(t(b),{placeholder:"Image Link",label:"",id:"imglink",modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=m=>i.value=m)},null,8,["modelValue"]),a("img",{src:i.value,alt:"",style:{border:"1px solid white","max-height":"165px"}},null,8,Z),e(t(g),{"label-placement":"fixed",class:"check",id:"schedule",modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=m=>u.value=m)},{default:n(()=>[p("Schedule")]),_:1},8,["modelValue"]),u.value?E((_(),v("input",{key:0,type:"datetime-local",step:"1","onUpdate:modelValue":s[2]||(s[2]=m=>d.value=m)},null,512)),[[M,d.value]]):S("",!0),a("p",null,I(new Date(d.value).getTime()),1),ee,te,e(t(g),{"label-placement":"fixed",class:"check",id:"allnotif"},{default:n(()=>[p("All")]),_:1}),e(t(g),{"label-placement":"fixed",class:"check",id:"eventsnotif"},{default:n(()=>[p("Events")]),_:1}),e(t(g),{"label-placement":"fixed",class:"check",id:"gamesnotif"},{default:n(()=>[p("Games")]),_:1}),e(t(g),{"label-placement":"fixed",class:"check",id:"schedulenotif"},{default:n(()=>[p("Schedule")]),_:1})]),_:1})]),_:1}),a("div",ne,[e(y,{modelValue:l.value,"onUpdate:modelValue":s[3]||(s[3]=m=>l.value=m),height:"400px"},null,8,["modelValue"])]),a("button",{style:{width:"50%","font-size":"30px","margin-bottom":"15px"},onClick:r}," Create Announcement ")])}}},ae=k(oe,[["__scopeId","data-v-4aee5996"]]),le={class:"full"},se={style:{color:"gray"}},ce={class:"buttons full"},ie=["src"],ue={__name:"AnnouncementView",props:["announcement"],emits:["responses"],setup(c,{emit:l}){const i=c;function u(r,o){confirm("Are you sure you want to delete announcement "+r+"?")&&d(o)}function d(r){fetch("https://greencanyonapp.com/api/announcements",{method:"DELETE",body:JSON.stringify({key:localStorage.getItem("key"),id:r}),headers:{"Content-Type":"application/json"}}).then(()=>{location.reload()})}return(r,o)=>(_(),v("div",le,[a("div",null,[a("h2",null,I(i.announcement.title),1),a("h6",se,I(i.announcement.descr),1),a("div",ce,[e(t(N),null,{default:n(()=>[e(t(j),{color:"danger",onClick:o[0]||(o[0]=s=>u(i.announcement.title,i.announcement.id))},{default:n(()=>[p("Delete")]),_:1})]),_:1})])]),a("div",null,[a("img",{src:i.announcement.imglink,alt:"",style:{"max-width":"150px","border-radius":"2px"}},null,8,ie)])]))}},de=k(ue,[["__scopeId","data-v-47660b60"]]),re={class:"div"},me={__name:"AnnouncementViewer",setup(c){const l=h([]),i=h(-1),u=async()=>{const d="https://greencanyonapp.com/api/announcements?max=100&offset=0&sortbytime=1";try{const r=(await(await fetch(d,{method:"GET"})).json()).data;return console.log(r),r}catch(r){console.error(r)}return[]};return(async()=>(l.value=await u(),console.log(l.value)))(),(d,r)=>(_(),v("div",re,[e(t(G),{lines:"inset",class:"left"},{default:n(()=>[(_(!0),v(L,null,U(l.value,o=>(_(),D(t(N),{key:o},{default:n(()=>[e(de,{onResponses:s=>i.value=o.id,announcement:o},null,8,["onResponses","announcement"])]),_:2},1024))),128))]),_:1})]))}},pe=k(me,[["__scopeId","data-v-9b98820d"]]);const q=c=>(C("data-v-73c6766e"),c=c(),$(),c),_e=q(()=>a("div",null,[a("h1",null,"Announcement Manager")],-1)),fe=q(()=>a("div",{class:"division"},null,-1)),he={key:0},ve={key:1},ge={__name:"AnnouncementManager",setup(c){const l=h("tab2");return(i,u)=>(_(),D(t(X),null,{default:n(()=>[e(t(K),{translucent:!0},{default:n(()=>[e(t(z),null,{default:n(()=>[e(t(F),{slot:"start"},{default:n(()=>[e(t(H),{color:"primary"})]),_:1}),e(t(R),null,{default:n(()=>[p("Announcement Manager")]),_:1})]),_:1})]),_:1}),e(t(W),null,{default:n(()=>[_e,fe,e(t(Q),{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=d=>l.value=d),value:"tab2"},{default:n(()=>[e(t(V),{value:"tab2"},{default:n(()=>[p(" View Announcements ")]),_:1}),e(t(V),{value:"tab1"},{default:n(()=>[p(" Create Announcement ")]),_:1})]),_:1},8,["modelValue"]),l.value==="tab1"?(_(),v("div",he,[e(ae)])):S("",!0),l.value==="tab2"?(_(),v("div",ve,[e(pe)])):S("",!0)]),_:1})]),_:1}))}},be=k(ge,[["__scopeId","data-v-73c6766e"]]);export{be as default};
