import{_ as y,r as h,a as N,o as _,c as f,d as e,w as t,u as n,I as E,e as g,b as a,f as v,g as r,h as z,p as C,q as V,t as b,s as D,m as $,F as M,i as j,j as T,x as L,y as O,z as G,A as J,B as P,C as U,D as F,E as I,l as S,G as H,H as R}from"./index-e3d08b53.js";const q=c=>(C("data-v-5f8a31da"),c=c(),V(),c),K={class:"questionContainer"},Q=["src"],W=q(()=>a("br",null,null,-1)),X=q(()=>a("h1",null,"Send with notification",-1)),Y={id:"markdowneditor"},Z={__name:"AnnouncementCreator",setup(c){const l=h(""),i=h("");function d(){const u=document.querySelectorAll("#title")[0].value,o=document.querySelectorAll("#desc")[0].value,s=document.querySelectorAll("#imglink")[0].value;console.log("Creating "+u+" with description "+o),fetch("http://ec2-54-193-22-54.us-west-1.compute.amazonaws.com/api/announcements",{method:"POST",body:JSON.stringify({timestamp:new Date().getTime()/1e3,title:u,descr:o,imglink:s,article:l.value,key:"w0lfpAck!@#"}),headers:{"Content-Type":"application/json"}}).then(()=>{location.reload(),alert("Announcement created!")});const A=document.querySelectorAll("#allnotif")[0].checked,w=document.querySelectorAll("#gamesnotif")[0].checked,k=document.querySelectorAll("#eventsnotif")[0].checked,x=document.querySelectorAll("#schedulenotif")[0].checked;if(A||w||k||x){let p="";A&&(p="all"),w&&(p="game"),k&&(p="event"),x&&(p="schedule"),console.log("Sending notification to "+p),fetch("http://ec2-54-193-22-54.us-west-1.compute.amazonaws.com/api/notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:p,title:"New announcement!",body:u,key:"w0lfpAck!@#"})})}}return(u,o)=>{const s=N("v-md-editor");return _(),f("div",K,[e(n(z),null,{default:t(()=>[e(n(E),null,{default:t(()=>[e(n(g),{placeholder:"Announcement Title",label:"",id:"title"}),e(n(g),{placeholder:"Announcement Description",label:"",id:"desc"}),e(n(g),{placeholder:"Image Link",label:"",id:"imglink",modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=m=>i.value=m)},null,8,["modelValue"]),a("img",{src:i.value,alt:"",style:{border:"1px solid white","max-height":"165px"}},null,8,Q),W,X,e(n(v),{"label-placement":"fixed",class:"check",id:"allnotif"},{default:t(()=>[r("All")]),_:1}),e(n(v),{"label-placement":"fixed",class:"check",id:"eventsnotif"},{default:t(()=>[r("Events")]),_:1}),e(n(v),{"label-placement":"fixed",class:"check",id:"gamesnotif"},{default:t(()=>[r("Games")]),_:1}),e(n(v),{"label-placement":"fixed",class:"check",id:"schedulenotif"},{default:t(()=>[r("Schedule")]),_:1})]),_:1})]),_:1}),a("div",Y,[e(s,{modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=m=>l.value=m),height:"400px"},null,8,["modelValue"])]),a("button",{style:{width:"50%","font-size":"30px","margin-bottom":"15px"},onClick:d}," Create Announcement ")])}}},ee=y(Z,[["__scopeId","data-v-5f8a31da"]]);const ne={class:"full"},te={style:{color:"gray"}},oe={class:"buttons full"},ae=["src"],le={__name:"AnnouncementView",props:["announcement"],emits:["responses"],setup(c,{emit:l}){const i=c;function d(o,s){confirm("Are you sure you want to delete announcement "+o+"?")&&u(s)}function u(o){fetch("http://ec2-54-193-22-54.us-west-1.compute.amazonaws.com/api/announcements",{method:"DELETE",body:JSON.stringify({key:"w0lfpAck!@#",id:o}),headers:{"Content-Type":"application/json"}}).then(()=>{location.reload()})}return(o,s)=>(_(),f("div",ne,[a("div",null,[a("h2",null,b(i.announcement.title),1),a("h6",te,b(i.announcement.descr),1),a("div",oe,[e(n($),null,{default:t(()=>[e(n(D),{color:"danger",onClick:s[0]||(s[0]=m=>d(i.announcement.title,i.announcement.id))},{default:t(()=>[r("Delete")]),_:1})]),_:1})])]),a("div",null,[a("img",{src:i.announcement.imglink,alt:"",style:{"max-width":"150px","border-radius":"2px"}},null,8,ae)])]))}},se=y(le,[["__scopeId","data-v-03e7cff4"]]);const ce={class:"div"},ie={__name:"AnnouncementViewer",setup(c){const l=h([]),i=h(-1),d=async()=>{const u="http://ec2-54-193-22-54.us-west-1.compute.amazonaws.com/api/announcements?max=100&offset=0&sortbytime=1";try{const o=(await(await fetch(u,{method:"GET"})).json()).data;return console.log(o),o}catch(o){console.error(o)}return[]};return(async()=>(l.value=await d(),console.log(l.value)))(),(u,o)=>(_(),f("div",ce,[e(n(L),{lines:"inset",class:"left"},{default:t(()=>[(_(!0),f(M,null,j(l.value,s=>(_(),T(n($),{key:s},{default:t(()=>[e(se,{onResponses:m=>i.value=s.id,announcement:s},null,8,["onResponses","announcement"])]),_:2},1024))),128))]),_:1})]))}},ue=y(ie,[["__scopeId","data-v-73a397a7"]]);const B=c=>(C("data-v-73c6766e"),c=c(),V(),c),de=B(()=>a("div",null,[a("h1",null,"Announcement Manager")],-1)),re=B(()=>a("div",{class:"division"},null,-1)),_e={key:0},me={key:1},pe={__name:"AnnouncementManager",setup(c){const l=h("tab2");return(i,d)=>(_(),T(n(R),null,{default:t(()=>[e(n(U),{translucent:!0},{default:t(()=>[e(n(O),null,{default:t(()=>[e(n(G),{slot:"start"},{default:t(()=>[e(n(J),{color:"primary"})]),_:1}),e(n(P),null,{default:t(()=>[r("Announcement Manager")]),_:1})]),_:1})]),_:1}),e(n(H),null,{default:t(()=>[de,re,e(n(F),{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=u=>l.value=u),value:"tab2"},{default:t(()=>[e(n(I),{value:"tab2"},{default:t(()=>[r(" View Announcements ")]),_:1}),e(n(I),{value:"tab1"},{default:t(()=>[r(" Create Announcement ")]),_:1})]),_:1},8,["modelValue"]),l.value==="tab1"?(_(),f("div",_e,[e(ee)])):S("",!0),l.value==="tab2"?(_(),f("div",me,[e(ue)])):S("",!0)]),_:1})]),_:1}))}},he=y(pe,[["__scopeId","data-v-73c6766e"]]);export{he as default};
