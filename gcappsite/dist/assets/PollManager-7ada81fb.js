import{_ as P,r as S,a as Z,o as d,c as _,b as l,d as e,w as n,u as t,I as L,e as C,f as I,g as h,h as z,F as A,i as N,j as T,k as Q,t as $,l as w,m as x,n as ee,v as te,p as R,q as E,s as V,x as U,y as le,z as oe,A as ne,B as se,C as ae,D as ce,E as G,G as ie,H as de}from"./index-8fc501b5.js";const r=i=>(R("data-v-c97ed5d7"),i=i(),E(),i),ue={id:"page"},re={class:"questionContainer"},_e=r(()=>l("h2",null," Create Poll ",-1)),pe=["src"],he=r(()=>l("br",null,null,-1)),fe=r(()=>l("br",null,null,-1)),ve=r(()=>l("h1",null,"Send with notification",-1)),ye=["onClick"],me=["onClick"],be=["onClick"],ge=r(()=>l("br",null,null,-1)),ke=r(()=>l("br",null,null,-1)),we=r(()=>l("br",null,null,-1)),Ce=["onUpdate:modelValue"],Se=r(()=>l("option",{value:"text"},"Text",-1)),xe=r(()=>l("option",{value:"radio"},"Radio",-1)),Ie=r(()=>l("option",{value:"checkbox"},"Checkbox",-1)),Pe=r(()=>l("option",{value:"short"},"Short Response",-1)),qe=r(()=>l("option",{value:"long"},"Long Response",-1)),$e=[Se,xe,Ie,Pe,qe],Ve={key:1,style:{"background-color":"white",width:"80%",height:"3px"}},Ae={style:{display:"flex","flex-direction":"row"}},Te=["onClick"],Oe=["onClick"],Ne=r(()=>l("br",null,null,-1)),Re=r(()=>l("br",null,null,-1)),Ee=r(()=>l("br",null,null,-1)),Be=r(()=>l("br",null,null,-1)),De={__name:"PollCreator",setup(i){const u=S("");S({});const c=S([]);function m(){c.value.push({title:"",options:[]})}function b(o){const s=c.value.indexOf(o);c.value.splice(s,1)}function y(o){o.options.push({title:""})}function g(o,s){o.options.splice(o.options.indexOf(s),1)}function q(){const o=document.querySelectorAll("#title")[0].value,s=document.querySelectorAll("#desc")[0].value,k=document.querySelectorAll("#button")[0].value;if(!confirm("Are you sure you want to create poll "+o+"?"))return;const a=document.querySelectorAll(".question"),p=[];a.forEach(f=>{const X=f.querySelectorAll("ion-input")[0].value,K=f.querySelectorAll("select")[0].value;let O;f.querySelectorAll(".required").length>0?O=f.querySelectorAll(".required")[0].checked:O=!1;const W=[].slice.call(f.querySelectorAll("ion-input")).splice(1),J=[];W.forEach(Y=>{J.push(Y.value)}),p.push({title:X,type:K,choices:J,required:O})}),console.log("Creating "+o+" with description "+s+" and button "+k),console.log(JSON.stringify(p)),fetch("https://greencanyonapp.com/api/polls",{method:"POST",body:JSON.stringify({timestamp:new Date().getTime()/1e3,title:o,desc:s,button:k,disabled:!1,polldata:JSON.stringify({poll:p}),image:u.value,key:"w0lfpAck!@#"}),headers:{"Content-Type":"application/json"}}).then(()=>{location.reload(),alert("Poll created!")});const B=document.querySelectorAll("#allnotif")[0].checked,D=document.querySelectorAll("#gamesnotif")[0].checked,M=document.querySelectorAll("#eventsnotif")[0].checked,j=document.querySelectorAll("#schedulenotif")[0].checked;if(B||D||M||j){let f="";B&&(f="all"),D&&(f="game"),M&&(f="event"),j&&(f="schedule"),console.log("Sending notification to "+f),fetch("https://greencanyonapp.com/api/notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:f,title:"New poll!",body:"New poll '"+o+"'",key:"w0lfpAck!@#"})})}}function v(o,s,k){if(s>=0&&s<o.length){if(k==="up"&&s>0){const a=o[s];o[s]=o[s-1],o[s-1]=a}else if(k==="down"&&s<o.length-1){const a=o[s];o[s]=o[s+1],o[s+1]=a}}}return(o,s)=>{const k=Z("ion-label");return d(),_("div",ue,[l("div",re,[_e,e(t(z),null,{default:n(()=>[e(t(L),null,{default:n(()=>[e(t(C),{placeholder:"Poll Title",label:"",id:"title"}),e(t(C),{placeholder:"Poll Description",label:"",id:"desc"}),e(t(C),{placeholder:"Image Link",label:"",id:"imglink",modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=a=>u.value=a)},null,8,["modelValue"]),l("img",{src:u.value,alt:"",style:{border:"1px solid white","max-height":"165px"}},null,8,pe),he,e(t(C),{placeholder:"Button Text",label:"",id:"button"}),fe,ve,e(t(I),{"label-placement":"fixed",class:"check",id:"allnotif"},{default:n(()=>[h("All")]),_:1}),e(t(I),{"label-placement":"fixed",class:"check",id:"eventsnotif"},{default:n(()=>[h("Events")]),_:1}),e(t(I),{"label-placement":"fixed",class:"check",id:"gamesnotif"},{default:n(()=>[h("Games")]),_:1}),e(t(I),{"label-placement":"fixed",class:"check",id:"schedulenotif"},{default:n(()=>[h("Schedule")]),_:1})]),_:1})]),_:1}),(d(!0),_(A,null,N(c.value,a=>(d(),T(t(z),{key:a,class:"question"},{default:n(()=>[e(t(Q),null,{default:n(()=>[l("button",{onClick:p=>b(a)}," X ",8,ye)]),_:2},1024),e(t(L),{ref_for:!0,ref:"poll"},{default:n(()=>[l("div",null,[l("button",{onClick:p=>v(c.value,c.value.indexOf(a),"up")},"↑",8,me),l("button",{onClick:p=>v(c.value,c.value.indexOf(a),"down")},"↓",8,be)]),ge,ke,l("h1",null," Question "+$(c.value.indexOf(a)+1),1),e(t(C),{placeholder:"Question Title",value:a.title},null,8,["value"]),a.type!="text"?(d(),T(t(I),{key:0,class:"required"},{default:n(()=>[h("Requires Response")]),_:1})):w("",!0),we,e(t(x),null,{default:n(()=>[e(k,null,{default:n(()=>[h("Question Type")]),_:1}),ee(l("select",{"onUpdate:modelValue":p=>a.type=p,placeholder:"Question Type"},$e,8,Ce),[[te,a.type]])]),_:2},1024),a.type=="radio"||a.type=="checkbox"?(d(),_("div",Ve)):w("",!0),(d(!0),_(A,null,N(a.options,p=>(d(),_("div",{key:p},[l("span",Ae,[e(t(C),{placeholder:"Option",value:p.title},null,8,["value"]),l("button",{onClick:F=>g(a,p),style:{width:"25",height:"25px","font-size":"20px"}}," X ",8,Te)])]))),128)),a.type=="radio"||a.type=="checkbox"?(d(),_("button",{key:2,style:{width:"20%","font-size":"20px"},onClick:p=>y(a)}," New Choice ",8,Oe)):w("",!0)]),_:2},1536)]),_:2},1024))),128)),l("button",{onClick:m}," + "),Ne,Re,Ee,Be,l("button",{style:{width:"20%","font-size":"30px","margin-bottom":"15px"},onClick:q}," Create Poll ")])])}}},Me=P(De,[["__scopeId","data-v-c97ed5d7"]]);const je={class:"full"},Je={style:{color:"gray"}},Le={class:"buttons full"},ze={__name:"PollView",props:["poll"],emits:["responses"],setup(i,{emit:u}){const c=i,m=u;function b(){m("responses")}function y(v,o){confirm("Are you sure you want to delete poll "+v+"?")&&q(o)}function g(v){console.log(v.disabled),fetch("https://greencanyonapp.com/api/pollsdisable",{method:"POST",body:JSON.stringify({key:"w0lfpAck!@#",id:v.id,disabled:v.disabled!="true"}),headers:{"Content-Type":"application/json"}}).then(()=>{location.reload()})}function q(v){fetch("https://greencanyonapp.com/api/polls",{method:"DELETE",body:JSON.stringify({key:"w0lfpAck!@#",id:v}),headers:{"Content-Type":"application/json"}}).then(()=>{location.reload()})}return(v,o)=>(d(),_("div",je,[l("h2",null,$(c.poll.title),1),l("h6",Je,$(c.poll.desc),1),l("div",Le,[e(t(x),null,{default:n(()=>[e(t(V),{onClick:b},{default:n(()=>[h("Responses")]),_:1})]),_:1}),e(t(x),null,{default:n(()=>[e(t(V),{onClick:o[0]||(o[0]=s=>g(c.poll))},{default:n(()=>[h($(c.poll.disabled=="false"?"Disable":"Enable"),1)]),_:1})]),_:1}),e(t(x),null,{default:n(()=>[e(t(V),{color:"danger",onClick:o[1]||(o[1]=s=>y(c.poll.title,c.poll.id))},{default:n(()=>[h("Delete")]),_:1})]),_:1})])]))}},Ue=P(ze,[["__scopeId","data-v-48754073"]]);const Ge=i=>(R("data-v-5c78849c"),i=i(),E(),i),He=Ge(()=>l("h1",null," Responses ",-1)),Fe={key:0},Xe={__name:"ResponseView",props:["pollid"],setup(i){return(u,c)=>(d(),_(A,null,[He,i.pollid!=-1?(d(),_("div",Fe)):w("",!0),e(t(x),{class:"centercontent"},{default:n(()=>[e(t(V),{href:"https://greencanyonapp.com/api/pollsresponsescsv?pollid="+i.pollid,download:"poll_"+i.pollid+".csv"},{default:n(()=>[h("Download CSV")]),_:1},8,["href","download"])]),_:1})],64))}},Ke=P(Xe,[["__scopeId","data-v-5c78849c"]]);const We={class:"div"},Ye={key:0,style:{width:"100%"}},Ze={__name:"PollViewer",setup(i){const u=S([]),c=S(-1),m=async()=>{const b="https://greencanyonapp.com/api/polls?max=100&offset=0&sortbytime=1";try{const y=(await(await fetch(b,{method:"GET"})).json()).data;return console.log(y),y}catch(y){console.error(y)}return[]};return(async()=>(u.value=await m(),console.log(u.value)))(),(b,y)=>(d(),_("div",We,[e(t(U),{lines:"inset",class:"left"},{default:n(()=>[(d(!0),_(A,null,N(u.value,g=>(d(),T(t(x),{key:g},{default:n(()=>[e(Ue,{onResponses:q=>c.value=g.id,poll:g},null,8,["onResponses","poll"])]),_:2},1024))),128))]),_:1}),c.value!=-1?(d(),_("div",Ye,[e(t(U),{lines:"none",class:"left centercontent"},{default:n(()=>[e(Ke,{pollid:c.value},null,8,["pollid"])]),_:1})])):w("",!0)]))}},Qe=P(Ze,[["__scopeId","data-v-458cd71a"]]);const H=i=>(R("data-v-b00479e2"),i=i(),E(),i),et=H(()=>l("div",null,[l("h1",null,"Poll Manager")],-1)),tt=H(()=>l("div",{class:"division"},null,-1)),lt={key:0},ot={key:1},nt={__name:"PollManager",setup(i){const u=S("tab2");return(c,m)=>(d(),T(t(de),null,{default:n(()=>[e(t(ae),{translucent:!0},{default:n(()=>[e(t(le),null,{default:n(()=>[e(t(oe),{slot:"start"},{default:n(()=>[e(t(ne),{color:"primary"})]),_:1}),e(t(se),null,{default:n(()=>[h("Poll Manager")]),_:1})]),_:1})]),_:1}),e(t(ie),null,{default:n(()=>[et,tt,e(t(ce),{modelValue:u.value,"onUpdate:modelValue":m[0]||(m[0]=b=>u.value=b),value:"tab2"},{default:n(()=>[e(t(G),{value:"tab2"},{default:n(()=>[h(" View Polls ")]),_:1}),e(t(G),{value:"tab1"},{default:n(()=>[h(" Create Poll ")]),_:1})]),_:1},8,["modelValue"]),u.value==="tab1"?(d(),_("div",lt,[e(Me)])):w("",!0),u.value==="tab2"?(d(),_("div",ot,[e(Qe)])):w("",!0)]),_:1})]),_:1}))}},at=P(nt,[["__scopeId","data-v-b00479e2"]]);export{at as default};
