import{_ as y,r as h,H as N,o as _,c as f,b as e,w as t,u as n,I as E,d as g,a as i,e as v,f as r,g as z,p as C,n as V,t as b,q as D,l as $,F as M,h as L,i as T,v as O,x as j,y as G,z as J,A as P,B as U,C as F,D as x,s as S,E as H,G as R}from"./index-59099b4d.js";const q=s=>(C("data-v-277e3e67"),s=s(),V(),s),K={class:"questionContainer"},Q=["src"],W=q(()=>i("br",null,null,-1)),X=q(()=>i("h1",null,"Send with notification",-1)),Y={id:"markdowneditor"},Z={__name:"AnnouncementCreator",setup(s){const a=h(""),c=h("");function d(){const u=document.querySelectorAll("#title")[0].value,o=document.querySelectorAll("#desc")[0].value,l=document.querySelectorAll("#imglink")[0].value;console.log("Creating "+u+" with description "+o),fetch("http://http://ec2-54-193-22-54.us-west-1.compute.amazonaws.com/api/announcements",{method:"POST",body:JSON.stringify({timestamp:new Date().getTime()/1e3,title:u,descr:o,imglink:l,article:a.value,key:"w0lfpAck!@#"}),headers:{"Content-Type":"application/json"}}).then(()=>{location.reload(),alert("Announcement created!")});const A=document.querySelectorAll("#allnotif")[0].checked,w=document.querySelectorAll("#gamesnotif")[0].checked,k=document.querySelectorAll("#eventsnotif")[0].checked,I=document.querySelectorAll("#schedulenotif")[0].checked;if(A||w||k||I){let p="";A&&(p="all"),w&&(p="game"),k&&(p="event"),I&&(p="schedule"),console.log("Sending notification to "+p),fetch("http://http://ec2-54-193-22-54.us-west-1.compute.amazonaws.com/api/notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:p,title:"New announcement!",body:u,key:"w0lfpAck!@#"})})}}return(u,o)=>{const l=N("v-md-editor");return _(),f("div",K,[e(n(z),null,{default:t(()=>[e(n(E),null,{default:t(()=>[e(n(g),{placeholder:"Announcement Title",label:"",id:"title"}),e(n(g),{placeholder:"Announcement Description",label:"",id:"desc"}),e(n(g),{placeholder:"Image Link",label:"",id:"imglink",modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=m=>c.value=m)},null,8,["modelValue"]),i("img",{src:c.value,alt:"",style:{border:"1px solid white","max-height":"165px"}},null,8,Q),W,X,e(n(v),{"label-placement":"fixed",class:"check",id:"allnotif"},{default:t(()=>[r("All")]),_:1}),e(n(v),{"label-placement":"fixed",class:"check",id:"eventsnotif"},{default:t(()=>[r("Events")]),_:1}),e(n(v),{"label-placement":"fixed",class:"check",id:"gamesnotif"},{default:t(()=>[r("Games")]),_:1}),e(n(v),{"label-placement":"fixed",class:"check",id:"schedulenotif"},{default:t(()=>[r("Schedule")]),_:1})]),_:1})]),_:1}),i("div",Y,[e(l,{modelValue:a.value,"onUpdate:modelValue":o[1]||(o[1]=m=>a.value=m),height:"400px"},null,8,["modelValue"])]),i("button",{style:{width:"50%","font-size":"30px","margin-bottom":"15px"},onClick:d}," Create Announcement ")])}}},ee=y(Z,[["__scopeId","data-v-277e3e67"]]);const ne={class:"full"},te={style:{color:"gray"}},oe={class:"buttons full"},ae={__name:"AnnouncementView",props:["announcement"],emits:["responses"],setup(s,{emit:a}){const c=s;function d(o,l){confirm("Are you sure you want to delete announcement "+o+"?")&&u(l)}function u(o){fetch("http://http://ec2-54-193-22-54.us-west-1.compute.amazonaws.com/api/announcements",{method:"DELETE",body:JSON.stringify({key:"w0lfpAck!@#",id:o}),headers:{"Content-Type":"application/json"}}).then(()=>{location.reload()})}return(o,l)=>(_(),f("div",ne,[i("h2",null,b(c.announcement.title),1),i("h6",te,b(c.announcement.descr),1),i("div",oe,[e(n($),null,{default:t(()=>[e(n(D),{color:"danger",onClick:l[0]||(l[0]=m=>d(c.announcement.title,c.announcement.id))},{default:t(()=>[r("Delete")]),_:1})]),_:1})])]))}},le=y(ae,[["__scopeId","data-v-00f26fa0"]]);const se={class:"div"},ce={__name:"AnnouncementViewer",setup(s){const a=h([]),c=h(-1),d=async()=>{const u="http://http://ec2-54-193-22-54.us-west-1.compute.amazonaws.com/api/announcements?max=100&offset=0&sortbytime=1";try{const o=(await(await fetch(u,{method:"GET"})).json()).data;return console.log(o),o}catch(o){console.error(o)}return[]};return(async()=>(a.value=await d(),console.log(a.value)))(),(u,o)=>(_(),f("div",se,[e(n(O),{lines:"inset",class:"left"},{default:t(()=>[(_(!0),f(M,null,L(a.value,l=>(_(),T(n($),{key:l},{default:t(()=>[e(le,{onResponses:m=>c.value=l.id,announcement:l},null,8,["onResponses","announcement"])]),_:2},1024))),128))]),_:1})]))}},ue=y(ce,[["__scopeId","data-v-5f95f69e"]]);const B=s=>(C("data-v-73c6766e"),s=s(),V(),s),ie=B(()=>i("div",null,[i("h1",null,"Announcement Manager")],-1)),de=B(()=>i("div",{class:"division"},null,-1)),re={key:0},_e={key:1},me={__name:"AnnouncementManager",setup(s){const a=h("tab2");return(c,d)=>(_(),T(n(R),null,{default:t(()=>[e(n(U),{translucent:!0},{default:t(()=>[e(n(j),null,{default:t(()=>[e(n(G),{slot:"start"},{default:t(()=>[e(n(J),{color:"primary"})]),_:1}),e(n(P),null,{default:t(()=>[r("Announcement Manager")]),_:1})]),_:1})]),_:1}),e(n(H),null,{default:t(()=>[ie,de,e(n(F),{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=u=>a.value=u),value:"tab2"},{default:t(()=>[e(n(x),{value:"tab2"},{default:t(()=>[r(" View Announcements ")]),_:1}),e(n(x),{value:"tab1"},{default:t(()=>[r(" Create Announcement ")]),_:1})]),_:1},8,["modelValue"]),a.value==="tab1"?(_(),f("div",re,[e(ee)])):S("",!0),a.value==="tab2"?(_(),f("div",_e,[e(ue)])):S("",!0)]),_:1})]),_:1}))}},fe=y(me,[["__scopeId","data-v-73c6766e"]]);export{fe as default};
